//! Provides quantities representing numbers combined with the SI prefix and unit system.




//=============================================================================
// Crates


use std::fmt;




//=============================================================================
// Traits


/// Providing conversion into LaTeX code.
///
/// This Trait is only available, if the **`tex`** feature has been enabled.
pub trait Latex {
	/// Converts the entity into a LaTeX-string.
	fn to_latex( &self, options: &Options ) -> String;
}




//=============================================================================
// Structs


/// Representing options to LaTeX commands generated by `to_latex`.
#[derive( PartialEq, Default, Debug )]
pub struct Options {
	pub drop_zero_decimal: Option<bool>,
	pub minimum_decimal_digits: Option<u8>,
}

impl Options {
	// Create a new `Options` without an option active. Is identical to `none()`.
	pub fn new() -> Options {
		Options::default()
	}

	// Create a new `Options` without an option active.
	pub fn none() -> Options {
		Options::default()
	}

	pub fn drop_zero_decimal( mut self, sw: bool ) -> Options {
		self.drop_zero_decimal = Some( sw );
		self
	}

	pub fn minimum_decimal_digits( mut self, digits: u8 ) -> Options {
		self.minimum_decimal_digits = Some( digits );
		self
	}
}

impl fmt::Display for Options {
	fn fmt( &self, f: &mut fmt::Formatter ) -> fmt::Result {
		match self.drop_zero_decimal {
			Some( x ) if x => write!( f, "[drop-zero-decimal]" ),
			_ => write!( f, "" ),
		}
	}
}




//=============================================================================
// Testing


#[cfg( test )]
mod tests {
	use super::*;

	#[test]
	fn builder_test() {
		let opts = Options {
			drop_zero_decimal: Some( true ),
			..Default::default()
		};
		let opts_from_builder: Options = Options::new().drop_zero_decimal( true );
		assert_eq!( opts, opts_from_builder );
	}

	#[test]
	fn options_to_string() {
		assert_eq!( Options::default().to_string(), "".to_string() );
		assert_eq!(
			Options::new()
				.drop_zero_decimal( true )
				.to_string(),
			"[drop-zero-decimal]".to_string()
		);
	}
}
